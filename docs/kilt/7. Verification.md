# Verification (Doğrulama) 🎯

Bu kısımda `Verifier` bireyinin rollerini birlikte gerçekleştireceğiz. Bu işlemler:

- 📥 `Claimer` tarafından verilen `Presentation` objesini teslim alacağız.
- 🧐 Veri içerisindeki bilgilerin doğruluğunu kontrol edeceğiz.
- 🔗 `attestation` işleminin doğru olup olmadığını zincirdeki hash değerini kontrol ederek onaylayacaksın. Bu attestation `revoke` da edilmiş olabilir. Bu duruma da bakmak gerekir.
- 🤔 Gönderilen kimlik belgesinin `Claimer` tarafından gönderildiğine emin olacaksın.

:::tip 🎉 Presentation: Şimdi ben PowerPoint Sunumu mu hazırlıcam birde yuha!
`Presentation` yani türkçesi ile sunum yaptığımız belge `credential` kullanılarak üretilecek belgedir. Bir `presentation` `credential`'in aksine içerisindeki belgelerin bazılarını saklayabilir. Bu bilgiler `verifier`'lar tarafından bilinmesi gerekmeyen bilgilerdir. Bu `presentation` aynı zamanda `credential`'in `Claimer`'a ait olduğunu kanıtlamaktadır.
:::

:::info 🤓 Verification Neydi ya hatırlasak mı?

🔍 Bir Claimer, onaylanmış bir Kimlik Bilgisini (Credential) aldığında, bunu cüzdanlarında saklayabilir. Ancak bu kimlik bilgisinin bir kopyası yoksa, geçerliliğini nasıl belirleyebiliriz?

🔒 KILT, bir Claimer tarafından bir kimlik bilgisinde sunulan bilgilerin doğruluğunu ve geçerliliğini bir Doğrulayıcıya (Verifier) doğrulama olanağı tanır. 

💡 Doğrulayıcı, bu üçüncü tarafa ya doğrudan kendi itibarlarına dayanarak ya da Onaylayıcının dahil olduğu bir delegasyon yapısı aracılığıyla güven duyar.

✅ Doğrulama süreci için:

🔑 Claimer, kimlik bilgisi ve tanımlayıcılarıyla ilişkilendirilmiş özel anahtara ihtiyaç duyar.

🔒 Doğrulayıcı, güvendiği Onaylayıcının tanımlayıcısına ihtiyaç duyar.

🔎 Doğrulama süreci sırasında, Claimer, Doğrulayıcıya üç şeyi kanıtlamayı amaçlar:

1️⃣ Kimlik bilgisi geçerlidir ve Onaylayıcı tarafından iptal edilmemiştir.
2️⃣ Kimlik bilgisinde belirtilen özellikler gerçekten Claimer'a aittir.
3️⃣ Kimlik bilgisi, belirli bir kullanım durumu için Doğrulayıcı için ilgili bilgileri içerir.
:::

## 🎨 Presentation Oluşturma

Sadece Claimer'ı gönderip Verifier'ın doğrulmasını bekleyemez. Aynı zamanda bu `credantial` ile birlikte o `credantial`'in sahibi olduğunu kanıtlaması gerekmektedir. Bu sahipliği kanıtlamak için bir `presentation` oluşturup imzalaması gerekmektedir.

### 📦 Paketlerin Eklenmesi:

```typescript title="claimer/createPresentation.ts"
import * as Kilt from '@kiltprotocol/sdk-js'
```
Bu satır, KILT SDK'sını projeye dahil eder. Bu SDK, KILT protokolü ile etkileşimde bulunmak için gerekli fonksiyonları ve sınıfları sağlar.

### **🛠 `createPresentation` Fonksiyonu**:

```typescript title="claimer/createPresentation.ts"
export async function createPresentation(
  credential: Kilt.ICredential,
  signCallback: Kilt.SignCallback,
  challenge?: string
): Promise<Kilt.ICredentialPresentation> {
```
Bu fonksiyon, bir kimlik bilgisi sunumu oluşturmak için asenkron bir fonksiyondur. Üç parametre alır:

- `credential`: Doğrulayıcıya sunulacak olan kimlik bilgisi.
- `signCallback`: Kimlik bilgisi sunumunun imzalanması için kullanılacak geri çağırma fonksiyonu.
- `challenge`: Opsiyonel bir parametre. Bu, doğrulayıcının talep ettiği rastgele bir dizedir ve kimlik bilgisi sunumunun doğrulayıcı tarafından talep edildiğini doğrulamak için kullanılır.

Fonksiyon, bir `ICredentialPresentation` nesnesi döndürür. Bu nesne, kimlik bilgisi sunumunun kendisidir.

### **🎨 Sunumu Oluşturma**:

```typescript title="claimer/createPresentation.ts"
return Kilt.Credential.createPresentation({
    credential,
    signCallback,
    challenge
  })
```
Bu kısım, `Kilt.Credential.createPresentation` fonksiyonunu kullanarak bir kimlik bilgisi sunumu oluşturur. Bu fonksiyon, yukarıda belirttiğimiz üç parametreyi alır ve bir kimlik bilgisi sunumu döndürür.

:::note 🌍 Geniş bir bakış yapalım
Şimdi kodun tamamına bakarak işlevini anlamak istersek:

```typescript title="claimer/createPresentation.ts"
import * as Kilt from '@kiltprotocol/sdk-js'

export async function createPresentation(
  credential: Kilt.ICredential,
  signCallback: Kilt.SignCallback,
  challenge?: string
): Promise<Kilt.ICredentialPresentation> {
  // Create the presentation from credential, DID and challenge.
  return Kilt.Credential.createPresentation({
    credential,
    signCallback,
    challenge
  })
}
```
Özetle, bu kod, bir kimlik bilgisi sunumu oluşturmayı sağlar. Bu sunum, bir doğrulayıcıya kimlik bilgisi sunarken kullanılır. Doğrulayıcı, bu sunumu kullanarak kimlik bilgisinin geçerliliğini ve kimlik bilgisi sahibinin kimliğini doğrulayabilir.
:::